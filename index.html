<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>馨草单词</title>
	<link rel="icon" href="/res/pic.ico">
	<style type="text/css">
		@font-face {
			font-family: 'ciclefina';
			src: url('images/cicle-webfont.woff2') format('woff2'),
			url('images/cicle-webfont.woff') format('woff'),
			url('images/ciclefina-webfont.svg') format('svg');
			font-weight: normal;
			font-style: normal;
		}
		@font-face {
			font-family: 'zantroke';
			src: url('images/zantroke-webfont.woff2') format('woff2'),
			url('images/zantroke-webfont.woff') format('woff'),
			url('images/zantroke-webfont.svg') format('svg');
			font-weight: normal;
			font-style: normal;
		}
		body{
			margin: 0 auto;
		}
		header{
			font-family: 'zantroke';
			height: 150px;
			background: url(/res/head.jpg) no-repeat currentColor;
			color: white;
			text-align: center;
			text-shadow: gray 3px 2px;
		}
		header h1{
			height: 150px;
			line-height: 150px;
			margin: 0 auto;
			padding: 10px;
			font-size: 1.8em;
			letter-spacing: 0.2em;
		}
		header h1 span{
			font-size: 0.5em;
		}
		section{
			display: flex;
		}
		section article{
			font-family: 'ciclefina' , '黑体';
			border: 1px solid black;
			padding: 5px;
			text-align: justify;
			line-height: 1.5em;
			color: rgb(0, 40, 0);
			background-color: rgb(200, 200, 200);
		}
		article#help{
			flex: 1;
			position: relative;
			overflow: hidden;
		}
		article#help p#textInfo{
			position: absolute;
			color: black;
			font-family: 'Arial';
			line-height: 200%;
			font-size: 1.3em;
			text-indent: 2em;
			left: 0.2em;
			top: 20%;
			text-shadow: gray 2px 1pz;
			z-index: 2;
			padding: 1%;
			margin: 5%;
		}
		article#help div#backPic{
			position: absolute;
			width: 98%;
			height: 98%;
			left: 1%;
			top: 1%;
			z-index: 1;
			text-align: center;
		}
		article#help div#backPic img{
			margin-top: 1em;
			width: 90%;
			height: 90%;
		}
		article#word{
			flex: 2;
			text-align: center;
			cursor: pointer;
		}
		article#word nav{
			height: 2em;
			margin: 1.5em;
		}
		article#word nav span{
			font-size: 1.3em;
			border: 3px outset  ;
			background-color: rgb(0, 50, 0);
			border-radius: 15%;
			padding: 0.2em;
			color: white;
			cursor: pointer;
			margin: 1em 1em;
		}
		article#word nav span:hover{
			background-color: rgb(0,75, 0);
		}
		article#word input#en{
			width: 80%;
			font-family: 'zantroke';
			color: rgb(200, 0, 0);
			font-size: 2.2em;
			text-align: center;
			border-radius: 20px;
			outline: none;
		}
		article#word button{
			position: absolute;
			top: 9.8em;
			height: 2.7em;
			font-family: 'Arial';
			font-size: 1.2em;
			margin-left: 0.5em;
			border-radius: 20px;
		}
		article#word p#pn{
	 		font-family:'Arial','ciclefina';
	 		color:rgb(0,150,0);
	 		font-size:2.5em;
	 		margin:1em auto;
			}
		article#word p#cn{
	 		font-family:'ciclefina', '黑体';
	 		font-size:1.5em;
	 		color:rgb(150,0,0);
	 		margin:1em auto;
	 		width: 80%;
	 		height: 40%;
	 		overflow: auto;
		}
		footer{
			font-family: 'zantroke','Arial';
			background-color: rgb(0, 30, 0);
			color: white;
			font-size: 1.3em;
			text-align: center;
			height: 70px;
			line-height: 70px;
		}
	}
	</style>
	<script src="/res/words.js"></script>
	<script type="text/javascript">
		//myword
var myWord={
	id:0,
	en:"",
	pn:"",
	cn:"",
	getWord:function (id) {
		var id=id || this.id;
		var arr=en6[id].split("/");
		this.en=arr[0];
		this.pn=arr[1];
		this.cn=arr[2];
		return myWord;
	},//end of getWord Method
	showWord:function (id) {
		var id = id || this.id ;
		this.getWord(id);
  		var  enDom = my$("article#word input#en") ;
        var  pnDom = my$("article#word p#pn")  ;
  	    var  cnDom = my$("article#word p#cn") ;
  	    enDom.value = this.en ;
  		pnDom.textContent = "/" + this.pn + "/";
  		cnDom.textContent = this.cn ;
	},////end of showWord Method
};//end of myWord Object
//model
var Model={
	learnId:0,
	learnWords:[],
	status:"",
	myImages:null,
	showHelp:function(){
		var textInfoDom=my$("article#help p#textInfo");
		var helpInfo="";
		switch(this.status){
			case "" : helpInfo = "You have not set any button of the Menu Bar . " ; break ;
			case "read" : helpInfo = "你选择了读一读模式,再点击一次按钮继续……" ; break ;
			case "search" : helpInfo =  "你选择了搜一搜模式,输入你要搜的英文，点击确认按钮，确认搜索词,再点击一次按钮继续……" ; break ;
  	  		case "write" : helpInfo = "你选择了写一写模式,输入单词后，点击确认按钮查看结果,再点击一次按钮继续……"; break ;
      		case "wordlist" : helpInfo = "你选择了单词表模式,输入首字母，点击确认按钮查看结果,再点击一次按钮继续……" ; break ;
		}
		textInfoDom.textContent = helpInfo ;
  	 	var backPicDom =  my$("article#help div#backPic") ;
     	var randInt =  Math.floor(Math.random()*3) ;
  	 	var childDom = backPicDom.querySelector("img");
     	backPicDom.removeChild(childDom);
     	backPicDom.appendChild(this.myImages[randInt]);
	}
}; //End of  Model 

for(var i=0;i<10;i++){
	var rand=Math.floor(Math.random()*en6.length);
	Model.learnWords.push(rand);
}

//window
window.onload=function(){
	//字体
	var fontSize=Math.floor(window.innerWidth/100);
	switch(fontSize){
		case 17 :	 case 16 :	 case 15 : 
	 	case 14 :	 case 13 : 	 case 12 :
	 	case 11 : fontSize =  fontSize*1.5 ; break;
     	case 10 : 
    	case 9 :  fontSize =  fontSize*1.8 ; break;
     	case 8 :  
     	case 7 :  fontSize =  fontSize*2 ; break;
     	case 6 :  
     	case 5 :  fontSize =  fontSize*2.5 ; break;
     	case 4 : 
	 	case 3 : fontSize =  fontSize*3 ; break;
	 	default: fontSize =  fontSize*3;
	}
	document.body.style.fontSize=fontSize+"px";
	//页面宽度
	var sectionHeight=window.innerHeight-150-80;
	document.querySelector("section").style.height=sectionHeight+"px";
	//按钮
	var readDom = my$("span#read");
	var searchDom = my$("span#search");
	var writeDom = my$("span#write");
	var wordlistDom = my$("span#wordlist");
	var buttonDom = my$("button");
	var enDom = my$("input#en");
	var pnDom = my$("p#pn");
	var cnDom = my$("p#cn");
	var textInfoDom=my$("article#help p#textInfo");
	//读一读
	readDom.onclick=function(){
		enDom.style.color="rgb(200, 0, 0)";
		Model.status=this.id;
		Model.showHelp();
		myWord.showWord(Math.floor(Math.random()*5498));
	}
	//搜一搜
	searchDom.onclick=function(){
		Model.status=this.id;
		Model.showHelp();
		enDom.value="请输入你想要查找的单词"
		enDom.style.color="gray";
		pnDom.textContent="";
		cnDom.textContent="";
		enDom.onclick=function(){
			enDom.value="";
			enDom.style.color="rgb(200, 0, 0)";
		}
		buttonDom.onclick=function(){
			pnDom.textContent="";
			cnDom.textContent="";
			for (var i = 0; i <= 5498; i++) {
				var word=myWord.getWord(i);
				if(word.en==enDom.value){
					pnDom.textContent=word.pn;
					cnDom.textContent=word.cn;
				}
			}
		}	
	}
	//写一写
	writeDom.onclick=function(){
		Model.status=this.id;
		Model.showHelp();
		var word=myWord.getWord(Math.floor(Math.random()*5498));
		enDom.value="请输入正确的单词";
		enDom.style.color="gray";
		pnDom.textContent=word.pn;
		cnDom.textContent=word.cn;
		enDom.onclick=function(){
			enDom.value="";
			enDom.style.color="rgb(200, 0, 0)";
		}
		buttonDom.onclick=function(){
			if(word.en==enDom.value){
				pnDom.textContent="正确";
			}
			else{
				pnDom.textContent="错误,正确答案为："+word.en;
			}
		}
	}
	//单词表
	wordlistDom.onclick=function(){
		Model.status=this.id;
		Model.showHelp();
		enDom.value="请输入要查找单词表的首字母";
		enDom.style.color="gray";
		pnDom.textContent="";
		cnDom.textContent="";
		enDom.onclick=function(){
			enDom.value="";
			enDom.style.color="rgb(200, 0, 0)";
		}
		buttonDom.onclick=function(){
			cnDom.textContent="";
			var s="";
			var n=0;
			for (var i = 0; i <= 5498; i++) {
				(function(j){
					arr=en6[i].split("/");
					if((arr[0]).substring(0,1)==enDom.value){
						n++;
						s=n+"."+arr;
						cnDom.textContent+=s;
					}
				}(i))
			}
		}
	}
	var myDate = new Date();
	my$("footer").textContent += myDate.getFullYear() +'年' + (myDate.getMonth()+1) +'月' + myDate.getDate() +'日'; 
	//图片
	var myImages = [] ;
	for (var i=1; i<4; i++ ){
		var img = new Image();
		img.src ="/res/re/" + i + ".jpg" ;
		myImages.push(img) ;
	}
	Model.myImages = myImages;
	var backPicDom =  my$("article#help div#backPic");
	var randInt =  Math.floor(Math.random()*3) ;
	backPicDom.appendChild(myImages[randInt]);
};//end of window.onload
//自定义的通用函数my$：
function my$(para){
	if(!para){
		throw para + " : wrong Selector para,you get nothing !" ;
	}
	var dom = document.querySelectorAll(para) ;
    if (dom.length > 1){
    	console.log("you get Dom Array list reference.");
	    return dom ;
    }else{
    	dom = document.querySelector(para) ;
    	if (dom){
    		console.log("you get a Dom reference.");
    		return dom ;
    	}else{
    		throw para + " : wrong Selector para,you get nothing !" ;
    	}
    }
}//end of my$
	</script>
</head>
<body>
	<header>
		<h1>Words Learning App <span>（大学英语6级）</span></h1>
	</header>
	<section>
		<article id="help">
			<p id="textInfo">
				 Photo from the movie of "Pride And Prejudice ",请选择上面状态按钮，进入相应学习单词的模式。
			</p>
			<div id="backPic"></div>
		</article>
		<article id="word">
			<nav>
				<span id="read">读一读</span>
				<span id="search">搜一搜</span>
    			<span id="write">写一写</span>
    			<span id="wordlist">单词表</span>
			</nav>
			<input id="en" type="text" value="ability">
			<button>提交</button>
			<p id="pn">/ ə'biliti /</p>
			<p id="cn">n.能力；本领；才能，才干；专门技能，天资</p>
		</article>
	</section>
	<footer>
		Code By 20192971王良银 of 19计算机一班 on 2021.12.07 当前时间：
	</footer>
</body>
</html>
